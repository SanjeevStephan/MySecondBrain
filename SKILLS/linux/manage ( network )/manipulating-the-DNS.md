#skills/networking 

# DNS is the service that translates a domain name like hackers-arise.com to the appropriate IP address; that way, your system knows how to get to it.

# DNS is a critical component of the internet, and

# although it’s designed to translate domain names to IP addresses, a hacker can use it to garner information on the target.



# Examining DNS with dig

One of the most useful commands for the aspiring hacker is dig, which
offers a way to gather DNS information about a target domain.
This information could include the IP address of the target’s name­server (the server that translates the target’s name to an IP address),
the target’s email server, and potentially any subdomains and IP addresses.
the ns option (short for nameserver).

# └─>

# dig google.com ns

                                                                                                                                               
```
┌──(sanju㉿Watchdog)-[~]  
└─$ dig google.com ns          
  
; <<>> DiG 9.18.13-1-Debian <<>> google.com ns  
;; global options: +cmd  
;; Got answer:  
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 53347  
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 9  
  
;; OPT PSEUDOSECTION:  
; EDNS: version: 0, flags:; udp: 1280  
;; QUESTION SECTION:  
;google.com.                    IN      NS  
  
;; ANSWER SECTION:  
google.com.             99965   IN      NS      ns3.google.com.  
google.com.             99965   IN      NS      ns4.google.com.  
google.com.             99965   IN      NS      ns2.google.com.  
google.com.             99965   IN      NS      ns1.google.com.  
  
;; ADDITIONAL SECTION:  
ns4.google.com.         154533  IN      A       216.239.38.10  
ns4.google.com.         70769   IN      AAAA    2001:4860:4802:38::a  
ns2.google.com.         100020  IN      A       216.239.34.10  
ns2.google.com.         100020  IN      AAAA    2001:4860:4802:34::a  
ns1.google.com.         83751   IN      A       216.239.32.10  
ns1.google.com.         114298  IN      AAAA    2001:4860:4802:32::a  
ns3.google.com.         98888   IN      A       216.239.36.10  
ns3.google.com.         105813  IN      AAAA    2001:4860:4802:36::a  
  
;; Query time: 32 msec  
;; SERVER: 192.168.29.1#53(192.168.29.1) (UDP)  
  
  
;; WHEN: Mon Jun 26 23:38:52 IST 2023  
;; MSG SIZE  rcvd: 287  
```

You can also use the dig command to get information on email ¬≠servers connected to a domain by adding the mx option (mx is short for mail exchange server)

# └─>

# dig google.com mx




# Changing the DNS Server
In some cases, you may want to edit your local DNS server.

To do so, you’ll edit a plaintext file named _/etc/resolv.conf_ on the system.

# └─> leafpad /etc/resolv.conf

```
# Generated by NetworkManager  
nameserver 192.168.29.1  
nameserver 2405:201:a407:e015::c0a8:1d01  
  

If you open the /etc/resolv.conf file now, you should see that it points the

DNS requests to Google’s DNS server rather than your local DNS server.

Your system will now go out to the Google public DNS server to resolve

domain names to IP addresses. This can mean domain names take a little

longer to resolve (probably milliseconds). Therefore, to maintain speed but

keep the option of using a public server, you might want to retain the local

DNS server in the resolv.conf file and follow it with a public DNS server. The

operating system queries each DNS server listed in the order it appears in

/etc/resolv.conf, so the system will only refer to the public DNS server if the

domain name can’t be found in the local DNS server.

```


# Mapping Your Own IP Address
```
A special file on your system called the hosts file also performs domain name–

IP address translation. The hosts file is located at /etc/hosts, and kind of as with

DNS, you can use it to specify your own IP address–domain name mapping.

In other words, you can determine which IP address your browser goes to

when you enter [www.microsoft.com](http://www.microsoft.com) (or any other domain) into the browser,

rather than let the DNS server decide. As a hacker, this can be useful for

hijacking a TCP connection on your local area network to direct traffic to a

malicious web server with a tool such as dnsspoof.

# └─>

# sudo leafpad /etc/hosts

127.0.0.1       localhost  
127.0.1.1       Watchdog  
  
# The following lines are desirable for IPv6 capable hosts  
::1     localhost ip6-localhost ip6-loopback  
ff02::1 ip6-allnodes  
ff02::2 ip6-allrouters  

By default, the hosts file contains only a mapping for your localhost, at

127.0.0.1, and your system’s hostname (in this case, Kali, at 127.0.1.1). But you

can add any IP address mapped to any domain you’d like. As an example of

how this might be used, you could map [www.bankofamerica.com](http://www.bankofamerica.com) to your local

website, at 192.168.181.131

127.0.0.1	localhost  
127.0.1.1	kali  
192.168.181.131 bankofamerica.com

Make certain you press tab between the IP address and the domain

# key—not the spacebar.

As you get more involved in your hacking endeavors and learn about

tools like dnsspoof and Ettercap, you’ll be able to use the hosts file to direct

any traffic on your LAN that visits [www.bankofamerica.com](http://www.bankofamerica.com) to your web server

at 192.168.181.131.
```